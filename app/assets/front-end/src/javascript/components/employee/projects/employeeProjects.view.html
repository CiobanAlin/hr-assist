<!-- CARD PROJECTS -->
<md-card>





  <!-- CARD TITLE -->
  <md-card-title>
    <md-card-title-text>
      <span class="md-headline">Projects</span>
    </md-card-title-text>
  </md-card-title><!-- /CARD TITLE -->





  <!-- CARD NOTES -->
  <md-content class="c-card-profile__notes">
    <p>
      <strong>NOTE: </strong>Complete here with the projects in which you were involved.
    </p>
    <p>
      Add the period in which you were involved in the project and the technologies that you used.
    </p>
  </md-content> <!-- CARD NOTES -->





  <!-- PREVIEW PROJECTS -->
  <md-content
    ng-show="!userProjects.displayOrHide"
    class="c-card-profile__preview">
    <!--
      @!TODO: Angajatul are adaugat un proiect.
      Proiectul intre timp este modificat.
      De verificat daca modificarile facute la proiect se reflecta la profilul angajatului
    -->
    <md-list layout="row" layout-wrap>
      <md-list-item
        flex="50"
        class="md-2-line projects-list"
        ng-repeat="project in userProjects.userProjects">
        <div class="md-list-item-text" layout="column">

          <h3 class="u-mb-10">
            <strong>{{ project.project.name }}</strong>
            <p>
              <!-- <span ng-click="userProjects.editProject(project)">Edit</span> -->
              <md-button
                class="md-icon-button md-primary"
                label="View project details"
                aria-label="View project details"
                ng-click="userProjects.editProject(project)">
                <md-icon class="material-icons">visibility</md-icon>
                <md-tooltip md-autohide="true">
                  View project details
                </md-tooltip>
              </md-button>
            </p>

            <p>
              <md-button
                class="md-fab md-mini md-warn c-card-group__remove"
                label="delete"
                aria-label="delete"
                ng-click="userProjects.deleteProject(project)">
                  <md-icon class="material-icons">delete</md-icon>
                  <md-tooltip>DELETE</md-tooltip>
              </md-button>
            </p>
          </h3>

          <p>
            <strong>I worked during:</strong>
          </p>

          <p>
            {{project.user_project_start_date | date: "MMMM y" }} - {{project.user_project_end_date | date: "MMMM y"}}
          </p>

          <p class="u-mt-10">
            <strong>
              I worked with the following technologies:
            </strong>
          </p>
          <p ng-repeat="technology in project.technologies track by $index">
           {{technology.name}}
          </p>
        </div>
      </md-list-item>
    </md-list>
  </md-content><!-- /PREVIEW PROJECTS -->




<form ng-submit="$event.preventDefault()"
  name="prjForm"
  novalidate>
  <!-- FORM PROJECTS -->
  <md-content ng-show="userProjects.displayOrHide" class="md-padding">

    <!-- CARD GROUP  -->
    <section
      class="md-padding c-card-group"
      layout-align="center center">



      <!-- REMOVE PROJECT -->
      <!-- I DON'T FIND ANY MEANING OF THIS REMOVE BUTTON -->
    <!-- <md-button
        class="md-fab md-mini md-warn c-card-group__remove"
        label="Remove project"
        aria-label="Remove project"
        ng-disabled="userProjects.disabledProjects"
        ng-click="userProjects.deleteProject(project)">
          <md-icon class="material-icons">delete</md-icon>
          <md-tooltip>Remove job</md-tooltip>
      </md-button> -->
      <!-- /REMOVE PROJECT -->



      <!-- SELECT PROJECT -->
      <section layout="row" layout-align="start center">
        <div class="u-mr-5 u-ml-5 u-mb-20" flex-gt-xs="100">
          <label>Project </label>
          <form ng-submit="$event.preventDefault()">
          <md-autocomplete
            md-selected-item="userProjects.selectedItem"
            md-search-text-change="userProjects.searchTextChange(userProjects.searchText)"
            md-search-text="userProjects.searchText"
            md-selected-item-change="userProjects.addProject(item)"
            md-items="item in userProjects.querySearch(userProjects.searchText, userProjects.projects)"
            md-item-text="item.name"
            md-min-length="0"
            placeholder="Search"
            ng-disabled="userProjects.disableProjectName"
            required>

            <md-item-template>
              <span
              class="item-metadata"
              md-highlight-text="userProjects.projects.searchText">
                {{item.name}}
              </span>
            </md-item-template>

          </md-autocomplete>
        </form>

        </div>
      </section><!-- SELECT PROJECT -->



      <!-- SELECT START/END DATE -->
      <!-- TODO SELECT DATE GET UNDEFINED DATA -->
      <!-- <section layout-gt-xs="row" layout-align="start center"> 

        <div flex-gt-xs="50">
          <label class="u-ml-5">From</label>
          <hra-date-select
            class="orizontal"
            flex-gt-xs="50"
            ng-model="userProjects.start_date"
            required>
          </hra-date-select>
        </div>

        <div flex-gt-xs="50">
          <label class="u-ml-5">To</label>
          <hra-date-select
            class="orizontal"
            flex-gt-xs="50"
            ng-model="userProjects.end_date"
            required>
          </hra-date-select>
        </div> 
      </section> --> <!-- /SELECT START/END DATE-->

        <!-- SELECT START/END DATE -->
        <section layout-gt-xs="row" layout-align="start center">
          <div flex-gt-xs="50">
            <label class="u-ml-5">From</label>
            <md-datepicker 
              ng-model="userProjects.start_date"
              md-placeholder="Start date"
              md-open-on-focus
              ng-change="userProjects.checkDates()"
              required>
            </md-datepicker>
          </div>
          
          <div flex-gt-xs="50">
            <label class="u-ml-5">To</label>
            <md-datepicker 
              ng-model="userProjects.end_date"
              md-placeholder="End date"
              md-open-on-focus
              md-min-date="userProjects.start_date"
              ng-change="userProjects.checkDates()"
              required>
            </md-datepicker>
          <div>
        </section>
        <section  ng-show="userProjects.validateDate" layout-gt-xs="row" layout-align="center center">
          <span class="alert-error fade"
            role="alert">
              "To" date must be greater than "From" date!
          </span>
        </section>
        <!-- /SELECT START/END DATE -->

      <md-divider
        class="md-padding divider-bold u-no-padding u-mt-20 u-mb-20">
      </md-divider>

      <p ng-show="userProjects.currentProject.technologies.length > 0" class="u-mb-10">
        <strong>
          On this project I worked with the following technologies:
        </strong>
      </p>
      <!-- TECHNOLOGIES -->
      <md-list layout="row" layout-wrap layout-align="left center">
          <md-list-item
            class="md-2-line"
            ng-repeat="tech in userProjects.userTechnologies track by $index">
            <div class="md-list-item-text" layout="column">
              <p class="c-filters__item"
                ng-click="userProjects.removeFromQueue(tech)" >
                {{$index + 1}} {{tech.name}}
                <span class="material-icons c-filters__icon">close</span>
              </p>
            </div>
        </md-list-item>
        <md-list-item
          flex="100"
          layout="row"
          ng-show="showTechnologies">

          <!-- TECHNOLOGIES AUTOCOMPLETE -->
          <div class="md-block" flex-gt-xs="100">
            <form ng-submit="$event.preventDefault()">
              <md-autocomplete
                md-search-text-change="userProjects.searchTextChange(userProjects.searchTechnology)"
                md-selected-item-change="userProjects.addInQueue(item)"
                md-search-text="userProjects.searchTechnology"
                md-items="item in userProjects.querySearch(userProjects.searchTechnology, userProjects.technologies)"
                md-item-text="item.name"
                md-min-length="0"
                placeholder="Search Technologies">
          
              <md-item-template>
                  <span
                  class="item-metadata"
                  md-highlight-text="userProjects.projects.searchTechnology">
                    {{item.name}}
                  </span>
                </md-item-template>
              </md-autocomplete>
            </form>
          </div><!-- /TECHNOLOGIES AUTOCOMPLETE -->

          <md-button
            class="md-icon-button md-warn"
            label="Remove project"
            aria-label="Remove project"
            ng-click="userProjects.removeFromQueue(tech)">
            <md-icon class="material-icons">delete</md-icon>
          </md-button>

        </md-list-item>
      </md-list><!-- /TECHNOLOGIES -->


      <section  ng-show="!showTechnologies">
        <md-button
          md-no-ink
          class="md-primary small-text"
          ng-click="userProjects.AddTechnology(); showTechnologies = ! showTechnologies">
          Add New Technology
        </md-button>
      </section>
    </section><!-- /CARD GROUP ng-repeat -->

  </md-content><!-- /FORM PROJECTS -->





  <!-- CARD ACTIONS -->
  <md-card-actions
    layout="column"
    layout-align="start"
    ng-show="!userProjects.displayOrHide">
    <md-button
      class="c-card-profile__btn no-margin"
      ng-click="userProjects.displayForm(); userProjects.clearInputs()"
      ng-disabled="btnIsDisabled">
      Add Project
    </md-button>
  </md-card-actions>

  <md-card-actions
    layout="row"
    layout-align="center center"
    ng-show="userProjects.displayOrHide"
    class="additional">

    <md-button
      class="md-raised md-primary"
      ng-click="userProjects.save(); userProjects.clearInputs();"
      type="submit"
      ng-disabled="prjForm.$invalid || userProjects.validateDate">
      Save
    </md-button>

    <md-button
      class="md-raised"
      ng-click="userProjects.displayForm()">
      Cancel
    </md-button>

  </md-card-actions>
  <!-- /CARD ACTIONS -->
</form>



</md-card><!-- /CARD PROJECTS -->
